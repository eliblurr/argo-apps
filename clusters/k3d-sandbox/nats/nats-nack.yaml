###############################
#  NACK JetStream Controller  #
###############################
jetstream:
  enabled: true
  image:
    repository: natsio/jetstream-controller
    tag: 0.15.1
    pullPolicy: IfNotPresent

  # NATS URL
  nats:
    url: nats://nats:4222

    # The nkey file to load in to connect to the NATS Server.
    nkey:
      secret:
        name: nats-sys-nkey
        key: sys.nkey

  # TLS: Enabled must be true, and a secret name specified for this to work
  tls:
    enabled: false
    tlsFirst: false
    # the secret containing the client ca.crt, tls.crt, and tls.key for NATS
    secretName:
    # Reference
    # https://docs.nats.io/nats-streaming-server/configuring/cfgfile#tls-configuration
    settings:
      client_cert: "/etc/nats/certs/tls.crt"
      client_key: "/etc/nats/certs/tls.key"
      client_ca: "/etc/nats/certs/ca.crt"
      timeout: 3

# restrict the controller to only watch resources in it's current namespace
namespaced: true

podAnnotations: 
  argocd.argoproj.io/sync-wave: "1"
  # argocd.argoproj.io/hook: PostSync

# Toggle to prevent the controller making changes to NATS streams/consumers.
readOnly: false